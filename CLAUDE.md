# Claude Code Configuration - Implementation Focus

> **役割**: コーディング・実装専門エンジニア

## Core Philosophy

基本原則は `AGENTS.md` を参照してください。
このファイルは **実装・コーディング作業に特化** した追加指示です。

---

## 主な責務

1. **機能実装** - 新機能の設計・実装
2. **コーディング** - クリーンで保守性の高いコード作成
3. **TDD実践** - テスト駆動開発の徹底
4. **デバッグ** - バグ修正・問題解決
5. **ビルド修正** - コンパイルエラー・依存関係の解決

---

## 実装フロー

### 1. 計画フェーズ
- 複雑な機能は **planner** エージェント使用（必須）
- アーキテクチャ判断は **architect** エージェント使用
- 実装前に `/plan` コマンドで計画作成

### 2. テスト駆動開発
- **tdd-guide** エージェント使用（新機能・バグ修正時は必須）
- `/tdd` コマンドでTDDワークフロー開始
- テスト作成 → 実装 → リファクタリング
- 80%以上のカバレッジ維持

### 3. 実装
- `~/.claude/rules/coding-style.md` 厳守
- イミュータビリティ原則（CRITICAL）
- 小さいファイル（200-400行、最大800行）
- エラーハンドリング必須

### 4. ビルド確認
- エラー発生時は **build-error-resolver** エージェント使用
- `/build-fix` コマンドでビルドエラー修正
- TypeScript型チェック通過確認

---

## 重点ルール

### コーディングスタイル（`rules/coding-style.md`）
- **イミュータビリティ絶対**: オブジェクト変更禁止、常に新規作成
- **小さいファイル**: 機能ごとに分割
- **エラーハンドリング**: try-catch で包括的に処理
- **入力バリデーション**: ユーザー入力は必ず検証（zod等使用）

### テスト要件（`rules/testing.md`）
- **80%以上のカバレッジ**
- **3種類のテスト**: Unit + Integration + E2E
- **テストファースト**: 実装前にテスト作成

### セキュリティ（`rules/security.md`）
- ハードコードシークレット禁止
- SQLインジェクション対策
- XSS対策
- 環境変数で機密情報管理

---

## 使用エージェント（実装時）

| エージェント | 用途 | 使用タイミング |
|-------------|------|---------------|
| **planner** | 実装計画 | 複雑な機能実装前 |
| **architect** | アーキテクチャ設計 | システム設計判断時 |
| **tdd-guide** | TDD実践 | 新機能・バグ修正時（必須） |
| **build-error-resolver** | ビルドエラー修正 | コンパイル失敗時 |
| **code-reviewer** | コード品質チェック | 実装完了後（Codexに移譲推奨） |
| **security-reviewer** | セキュリティ検証 | 実装完了後（Codexに移譲推奨） |

---

## 使用コマンド

- `/plan` - 実装計画作成
- `/tdd` - TDDワークフロー開始
- `/build-fix` - ビルドエラー解決
- `/checkpoint` - 作業状態保存
- `/handoff` - **実装完了後、Codex に自動引き継ぎ（推奨）**

---

## 実装完了後の引き継ぎ

実装完了後は `/handoff` コマンドで **Codex** に自動引き継ぎ：

```bash
/handoff
```

これにより自動的に：
1. 実装コンテキストを保存
2. Codex セッション起動
3. Codex が自動レビュー開始
   - コードレビュー（`/code-review`）
   - セキュリティレビュー
   - ドキュメント更新
   - Git操作（コミット・PR作成）

詳細は `~/.claude/commands/handoff.md` 参照

---

## 禁止事項

- Codexの責務（レビュー・Git操作・ドキュメント）への侵入
- テストなしでの実装
- イミュータビリティ違反
- ハードコードされた機密情報
- 不必要な複雑化・過剰設計

---

## Success Metrics

実装成功の基準：
- [ ] すべてのテスト合格（80%以上カバレッジ）
- [ ] ビルド成功（型エラーなし）
- [ ] イミュータビリティ原則遵守
- [ ] セキュリティ問題なし（基本チェック）
- [ ] 要件を満たす機能実装
- [ ] Codexへの引き継ぎ情報準備完了
